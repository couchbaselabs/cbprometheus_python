[{"appcode":"function OnUpdate(doc, meta) {\n    log('document', doc);\n    if(doc['jsonType'] == \"Transaction\"){\n        try {\n            var hxnDoc = getHxnDoc(doc['meta.id']);\n            hxnDoc['head'] = doc;\n            hxnDoc['history'].push({\"date\":new Date().toISOString(), \"doc\":doc})\n        } catch (err) {\n            log(err);\n            try{\n                var hxnDoc = {\"head\": {}, \"history\":[]};\n                hxnDoc['head'] = doc;\n                hxnDoc['history'].push({\"date\":new Date().toISOString(), \"doc\":doc});\n            } catch (err){\n                log(err);\n            }\n            \n        }\n        hxn[meta.id] = hxnDoc;\n    }\n}\n\nfunction getHxnDoc(DocID){\n    return hxn[DocID];\n}\n\nfunction OnDelete(meta) {\n    try{\n        var hxnDoc = getHxnDoc(doc['meta.id']);\n        hxnDoc['head'] = {\"status\": \"deleted\"}\n        hxnDoc['history'].push({\"date\":new Date().toISOString(), \"doc\":{\"status\":\"deleted\"}})\n    } catch(err){\n        log(err);\n    }\n}","depcfg":{"buckets":[{"alias":"hxn","bucket_name":"hxn"}],"metadata_bucket":"eventing_meta","source_bucket":"main"},"version":"evt-6.0.1-2037-ee","handleruuid":2537458899,"id":0,"appname":"Transaction_Changes","settings":{"cleanup_timers":false,"dcp_stream_boundary":"everything","deadline_timeout":62,"deployment_status":true,"description":"Logs document history for Transactions","execution_timeout":60,"log_level":"INFO","processing_status":true,"user_prefix":"eventing","using_timer":false,"worker_count":3},"using_timer":false}]